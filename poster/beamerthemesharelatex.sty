%==============================================================================
% Beamer style for posters
% // based on 'cpbgposter' beamer theme //
%==============================================================================

\ProvidesPackage{beamerthemesharelatex}

\RequirePackage{tikz}
\usetikzlibrary{arrows,decorations.pathmorphing,backgrounds,calc}
\RequirePackage[T1]{fontenc}
\RequirePackage{lmodern}
\RequirePackage{textcomp}
\RequirePackage{amsmath,amssymb}
\usefonttheme{professionalfonts}

\usepackage{ragged2e}

% normal math font
%\usepackage{mathptmx}
% funny math font
\usepackage{euler}

%%% other text fonts
\renewcommand\ttdefault{lmvtt}

% multicols
\usepackage{multicol}
\setlength{\columnsep}{80pt}

% captions
\usepackage[justification=justified,listformat=simple,format=plain,labelformat=simple]{caption}

\usepackage{url}

%==============================================================================
% define basic colors 
%==============================================================================

% 1. DEFINE YOUR CUSTOM COLORS
\definecolor{CSred}{RGB}{160,32,60}
\definecolor{CSgrey}{RGB}{136,121,150}
\definecolor{UPSred}{RGB}{97,21,58}

% 2. MAP TO THEME INTERNAL COLORS
% The theme uses color0-color3 for TikZ gradients and manual formatting.
% We map your colors to these variables to ensure the whole poster updates.

\definecolor{color0}  {RGB}{0,0,0}       %%% Text color (Black)
\definecolor{color1}  {RGB}{136,121,150} %%% Subsection/Structure (CSgrey)
\definecolor{color2}  {RGB}{160,32,60}   %%% Section/Title (CSred)
\definecolor{color3}  {RGB}{255,255,255} %%% Background color (White)

%==============================================================================
% set the basic colors palette
%==============================================================================

% Apply your specific beamer settings
\setbeamercolor{palette primary}{bg=CSred,fg=white}
\setbeamercolor{palette secondary}{bg=CSred,fg=white}
\setbeamercolor{palette tertiary}{bg=CSgrey,fg=white}
\setbeamercolor{palette quaternary}{bg=CSgrey,fg=white}
\setbeamercolor{structure}{fg=CSgrey}
\setbeamercolor{titlelike}{bg=CSred,fg=white}

\setbeamercolor{colorbar}{fg=color0,bg=color1}
\setbeamercolor{normal text}{fg=color0}

% background color
\beamertemplatesolidbackgroundcolor{color3}

%set the fonts
\setbeamerfont{title}{series=\bfseries} % Your requested font setting
\setbeamerfont{section in head/foot}{series=\bfseries}
\setbeamerfont{block title}{series=\bfseries}
\setbeamerfont{block alerted title}{series=\bfseries}
\setbeamerfont{frametitle}{series=\bfseries}
\setbeamerfont{frametitle}{size=\Large}
\setbeamerfont{caption}{size=\normalsize}
\setbeamerfont{caption name}{size=\normalsize}

%set some beamer theme options
\setbeamertemplate{title page}[default][colsep=-4bp,rounded=true]
\setbeamertemplate{sections/subsections in toc}[square]
\setbeamertemplate{items}[circle]
\setbeamertemplate{blocks}[width=0.0]
\beamertemplatenavigationsymbolsempty

%set bibliography style
\setbeamertemplate{bibliography item}[text]
\setbeamercolor{bibliography item}{fg=color0,bg=color3}
\setbeamercolor{bibliography entry author}{fg=color0,bg=color3}
\setbeamerfont{bibliography item}{size=\small}
\setbeamerfont{bibliography entry author}{size=\small}


%==============================================================================
% build the poster title
%==============================================================================
\setbeamertemplate{headline}{
 \leavevmode
  \begin{columns}
   \begin{column}{0.15\linewidth}
    \begin{center}
     % \includegraphics[width=0.55\linewidth]{logos/Logo_CentraleSupelec.svg.png}
    \end{center}
   \end{column}
   \begin{column}{.7\linewidth}
    \vskip2cm
    \centering
    % Uses color2 (CSred) for the title
    {\color{color2} \textbf{\huge{\inserttitle}}\\[1ex]}
    \vskip 1.5cm
    {\color{fg} \Large{\insertauthor}\\[1ex]}
    {\color{fg} \large{\insertinstitute}\\[1ex]}
        \vskip2cm
      \end{column}
       \begin{column}{.15\linewidth}
         \begin{center}
           \includegraphics[width=0.7\linewidth]{logos/Logo_CentraleSupelec.svg.png}
         \end{center}
       \end{column}
        \vspace{1cm}
    \end{columns}
}


%==============================================================================
% build the poster foot
%==============================================================================
\setbeamertemplate{footline}{
 \leavevmode
    \vskip2cm
  \begin{center}
\begin{minipage}[c][3cm][c]{0.95\textwidth}
  \begin{center}
     \begin{flushleft}
     \vskip-1cm
     \begin{tikzpicture}[
remember picture,overlay,
]
       % Uses color2 (CSred) for the gradient bar
       \shade [inner color=color2,outer color=color3] (0,0) rectangle (\textwidth,0.3cm);
     \end{tikzpicture}
     \end{flushleft}
  \vskip1cm
    \centering
{\color{fg} \textbf{\large{\insertshorttitle}}}
  \end{center}
\end{minipage}
  \end{center}
    \vskip1cm
}

%==============================================================================
% Section and subsection re-definitions

\renewcommand{\section}[1]{
\par\vskip\medskipamount%
     \begin{flushleft}
     \begin{tikzpicture}[remember picture,overlay]
       % Uses color2 (CSred) for the gradient bar
       \shade [inner color=color2,outer color=color3] (0,0) rectangle (\columnwidth,0.3cm);
     \end{tikzpicture}
     \end{flushleft}
     \begin{center}
     % Uses color2 (CSred) for section text
     {\textcolor{color2}{\textbf{\Large #1}}}
     {\parskip0pt\par}
     \end{center}
     \begin{flushleft}
     \vskip-1cm
     \begin{tikzpicture}[remember picture,overlay]
       \shade [inner color=color2,outer color=color3] (0,0) rectangle (\columnwidth,0.3cm);
     \end{tikzpicture}
     \end{flushleft}
  {\parskip0pt\par}
  \justifying
}

%%%
\renewcommand{\subsection}[1]{
\par\vskip\medskipamount%
     \begin{center}
     \vskip0.8cm
     % Uses color1 (CSgrey) for subsection text
     {\textcolor{color1}{\textbf{\textsl{\large #1}}}}
     {\parskip0pt\par}
     \end{center}
  \justifying
}

%==============================================================================